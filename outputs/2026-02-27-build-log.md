> **Question:** Please copy your summary of actions to an output file. Do this for all steps in the building of the virtual company as documented in the proposal so that we have a documented history of the steps.

# IDEA Virtual Company — Build Log

Chronological record of completed steps in configuring the IDEA virtual company.
Cross-references the "What Needs to Happen" backlog in the proposal.

---

## Phase 1 — Design decisions (pre-2026-02-26)

These items were resolved before the current research conversation began.
They are marked `[x]` in the proposal backlog.

### GitHub org name
**Decision:** Use `idea-edu-africa` as the GitHub org name.
**Status:** Superseded — see Phase 3 below. Decision deferred; proceeding under
`koenswings` while the name is finalised.

### Repos set up under koenswings
**Repos created:** `engine`, `openclaw`, `idea-proposal` (now `agent-researcher`)
**Status:** Done. Repos renamed in Phase 3.

### VS Code / Claude Code / tmux session pattern
**Decision:** One tmux session per agent, named `claude-<project>`. Each agent
has its own Claude Code session scoped to its project directory.
**Status:** Done. Convention is in use across all agents.

### AGENTS.md file structure
**Decision:** One repo per agent. Each agent workspace contains an `AGENTS.md`
file defining the agent's role, scope, and constraints.
**Status:** Decided. Files to be written during agent workspace creation (Phase 4).

### Shared agent knowledge
**Decision:** Single `CONTEXT.md` at the org root (`/home/pi/idea/CONTEXT.md`).
All agents read from the same file. No per-agent copies.
**Status:** Decided. File to be written in Phase 4.

### Standup model
**Decision:** Roundtable standup format. CEO seeds a markdown file with context;
each agent appends its section in one session. Discussion threads in `discussions/`.
@-mention convention for cross-agent questions.
**Status:** Decided. Templates and scripts to be created in Phase 4.

### Operating layer
**Decision:** Mission Control from day one as the primary task management tool.
No spreadsheets or BACKLOG.md as primary source of truth.
**Status:** Decided. Mission Control already running alongside OpenClaw.

### BACKLOG.md export
**Decision:** `scripts/export-backlog.sh` queries the Mission Control REST API
and generates `BACKLOG.md` as a read-only snapshot for agents.
**Status:** Decided. Script to be written in Phase 4.

### Website technology
**Decision:** Static site on GitHub Pages.
**Status:** Decided. Framework (Astro or Hugo) still to be confirmed.

### Teacher guide delivery
**Decision:** All three delivery channels — Engine-served, Console-embedded,
and printable PDF.
**Status:** Decided. Pipeline design still to be done.

---

## Phase 2 — Proposal and tooling (2026-02-26)

Work done in the initial research conversation with Compass.

### Proposal restructured (2026-02-26)
**What:** `research/openclaw-initial-config/proposal.md` restructured for
progressive disclosure:
- Added "What is OpenClaw?" subsection
- Moved Mission Control before Complementary Tools
- Added clickable Table of Contents
- Reordered all 22 sections from general → specific
- Added `app-openclaw` section (system disk model, repo structure, IDEA config separation)
- Added backlog items for `app-openclaw` repo and setup script
**Output:** proposal.md (committed to agent-researcher)

### PDF generation toolchain fixed (2026-02-26)
**What:** `md-to-pdf.ts` in the engine project fixed to generate portable PDFs
with working internal hyperlinks.
- Added `addHeadingIds()` post-processing (markdown-it does not emit id attributes)
- Replaced `wkhtmltopdf` with Chromium headless (`chromium --headless --print-to-pdf`)
- `wkhtmltopdf` embeds `file:///tmp/...` URIs that break on other machines;
  Chromium generates proper internal GoTo PDF destinations
- Added `installChromium()` to `Engine.ts` / `buildEngine()`
**File changed:** `/home/pi/idea/agents/agent-engine-dev/script/md-to-pdf.ts`
**Tool:** `cd /home/pi/idea/agents/agent-engine-dev && ./md-to-pdf <input.md> <output.pdf>`

### Engine repo migration plan (2026-02-26)
**Question answered:** How to migrate engine repo to agent-engine-dev with history
and Claude memory preserved.
**Answer:** `mv` preserves git history; copy Claude memory dir before first session
at the new path. Both done in Phase 3.
**Output:** `outputs/2026-02-26-1545-engine-repo-migration.md`

### OpenClaw architecture — separation from idea repo (2026-02-26)
**Question answered:** Should openclaw be merged into the idea repo?
**Answer:** No. Keep separate. Add `idea/openclaw/` config folder to the idea repo
for IDEA-specific config (agent roster, no tokens). openclaw repo holds the
generic platform.
**Output:** `outputs/2026-02-26-1530-openclaw-in-idea-repo.md`

### app-openclaw architecture (2026-02-26)
**Question answered:** How to model openclaw as a deployable platform.
**Answer:** Generic platform in `app-openclaw`; IDEA-specific config layered via
`idea/scripts/setup.sh`. Clear separation between platform and organisation.
**Output:** `outputs/2026-02-26-1610-app-openclaw-architecture.md`

### app-openclaw repo structure (2026-02-26)
**Question answered:** Should openclaw be restructured as `app-openclaw` following
the app-* template?
**Answer:** Yes. Follow the template exactly (`compose.yaml` with `x-app` metadata,
`init_data.tar.gz`). Will not auto-instantiate via Engine (OpenClaw is Pi-resident,
not a dockable app) but the template gives structural consistency and forward
compatibility.
**Output:** `outputs/2026-02-26-1645-app-openclaw-repo-structure.md`

### System disk evaluation (2026-02-26)
**Question answered:** Can `build-app-instance` provision openclaw onto a permanently
attached USB SSD as a "system app"?
**Answer:** Architecturally sound. The key unknown is whether chokidar fires `add`
events for devices already attached when the Engine boots. Test with a trivial app
first before committing to this for openclaw.
**Output:** `outputs/2026-02-26-1700-app-openclaw-system-disk-evaluation.md`

### Org name review (2026-02-26)
**Question answered:** Review available GitHub org names; check domain availability.
**Answer:** `idea-edu-africa` — GitHub ✅, domain ✅. All close variants (`idea-africa`,
`ideaafrica`, `idea-edu`) taken. `idea-schools` and `idea-digital-africa` available
but less precise. Recommendation: `idea-edu-africa` for GitHub, `idea-schools.org`
for public website.
**Output:** `outputs/2026-02-26-1730-org-name-review.md`

### Single-word name search (2026-02-26–2026-02-27)
**Question answered:** Single-word alternatives to `idea-edu-africa`.
**Round 1:** `edufrica` (edu + africa) — GitHub ✅, domain ✅.
`funzika` (Swahili: to educate) — GitHub ✅, domain ✅.
All Swahili education words (elimu, soma, akili, etc.) taken on GitHub.
**Round 2 (idea combinations):** Four clean options — all GitHub ✅, domain ✅:
- `ideabora` (Swahili: excellent/the best)
- `ideamoja` (Swahili: one/united)
- `ideaweza` (Swahili: can/is able)
- `ideakazi` (Swahili: work/mission)
**Decision:** Name decision deferred. Proceeding under `koenswings`.
**Outputs:** `outputs/2026-02-26-1800-org-name-single-word.md`,
`outputs/2026-02-26-1810-org-name-idea-combinations.md`

---

## Phase 3 — Repo migrations (2026-02-27)

### GitHub repo renames
**What:** Three repos renamed on GitHub under `koenswings`:
- `engine` → `agent-engine-dev`
- `openclaw` → `app-openclaw`
- `console` → `agent-console-dev`
**How:** `gh repo rename <new-name> --repo koenswings/<old-name> --yes`
**Effect:** GitHub sets up automatic redirects from old URLs. All existing
links and clone URLs continue to work as long as the old names are not reused.

### engine — local migration
**What:** Engine repo moved from `/home/pi/projects/engine` to
`/home/pi/idea/agents/agent-engine-dev`.
- Claude memory copied: `/home/pi/.claude/projects/-home-pi-projects-engine/memory/`
  → `/home/pi/.claude/projects/-home-pi-idea-agents-agent-engine-dev/memory/`
  (preserves full memory for the next engine-dev session)
- Git remote updated: `git@github.com:koenswings/agent-engine-dev.git`
- Push verified: `Everything up-to-date`

### app-openclaw — remote update only
**What:** Git remote updated to `git@github.com:koenswings/app-openclaw.git`.
Directory left at `/home/pi/openclaw` — Docker is running from that path;
moving it would break the live system.

### console — GitHub rename only
**What:** Renamed on GitHub to `agent-console-dev`. No local copy on Pi.

---

## Phase 4 — Workspace structure and AGENTS.md deployment (2026-02-27)

### Step 4 — `/home/pi/idea/` directory structure (partial)
**What:** `agents/` subfolder created under `/home/pi/idea/` housing all agent repos.
**Status:** Partial. Org root coordination files (`CONTEXT.md`, `ROLES.md`, `PROCESS.md`,
`BACKLOG.md`, `standups/`, `discussions/`, `design/`, `proposals/`, `scripts/`) not yet
deployed — staged in `research/openclaw-initial-config/idea/` awaiting deployment.
**Note:** `/home/pi/idea/engine/` also exists — old OpenClaw sandbox from when agent was
named "engine" (pre-rename). Contains SOUL.md, IDENTITY.md, USER.md, TOOLS.md,
HEARTBEAT.md, BOOTSTRAP.md. Not a git repo. Superseded by new sandbox path.

### Step 6 — Docker volume mount updated ✅
**What:** `compose.yaml` bind mount changed from `/home/pi/projects` → `/home/pi/idea`.
**Effect:** All agent workspaces under `/home/pi/idea/agents/` now visible inside
the OpenClaw container at `/home/node/workspace/agents/`.
**Commit:** `0a5f16a Mark Docker volume mount step as complete in proposal backlog`

### Step 7 — GitHub repo renames ✅ (partial — already in Phase 3)
Three repos renamed; new repos for site-dev, quality-manager, programme-manager still
to be created (pending org name decision).

### Step 8 — Agent workspace directories created ✅
**What:** All six agent directories now in place under `/home/pi/idea/agents/`:
- `agent-engine-dev/` — migrated from `/home/pi/projects/engine`
- `agent-researcher/` — was already in place (this workspace)
- `agent-console-dev/` — cloned from `koenswings/agent-console-dev`
- `agent-site-dev/` — new git repo initialised
- `agent-quality-manager/` — new git repo initialised
- `agent-programme-manager/` — new git repo initialised
**Commit:** `5801fb2 Mark agent workspace creation as complete in proposal backlog`

### Step 9 — AGENTS.md copied to all agent workspaces ✅
**Date:** 2026-02-27

Copied from `research/openclaw-initial-config/agent-<role>/AGENTS.md` into each
workspace root:

| Workspace | Action | Notes |
|-----------|--------|-------|
| `agent-engine-dev/` | Replaced existing `AGENTS.md` | Old file had wrong SOUL/USER paths (`../SOUL.md`), wrong title ("Engine Agent"), missing BACKLOG ref. Replaced with approved version. |
| `agent-console-dev/` | Created new `AGENTS.md` | — |
| `agent-site-dev/` | Created new `AGENTS.md` | — |
| `agent-quality-manager/` | Created new `AGENTS.md` | — |
| `agent-programme-manager/` | Created new `AGENTS.md` | — |

Note: `agent-researcher/` uses `CLAUDE.md` not `AGENTS.md` (Claude Code CLI, not
OpenClaw). Its `CLAUDE.md` was already in place.

---

### Step 12a — Mission Control deployed ✅
**Date:** 2026-02-27

Mission Control is a full stack (not a single container): Next.js frontend, Python/FastAPI
backend, PostgreSQL, Redis, and a webhook worker. Runs as a standalone compose stack at
`/home/pi/openclaw/mission-control/` (cloned from `abhi1693/openclaw-mission-control`).

**What was done:**
- Built all images from source on the Pi (ARM64 — Python slim + Node Alpine, both compatible)
- Tailscale Serve configured:
  - `https://openclaw-pi.tail2d60.ts.net:4000` → MC frontend
  - `https://openclaw-pi.tail2d60.ts.net:8000` → MC backend API
- `.env` created at `/home/pi/openclaw/mission-control/.env`:
  - `AUTH_MODE=local`, `LOCAL_AUTH_TOKEN` (stored in `/home/pi/openclaw/secrets/mc_local_auth_token.txt`)
  - `CORS_ORIGINS=https://openclaw-pi.tail2d60.ts.net:4000`
  - `NEXT_PUBLIC_API_URL=https://openclaw-pi.tail2d60.ts.net:8000` (baked into Next.js build)
  - Frontend on port 4000, backend on port 8000
- Auth bootstrapped via API (local user created)
- IDEA organisation created in MC
- `Engineering` board group created (for engine-dev, console-dev, site-dev, quality-manager)
- `HQ` board group created (for programme-manager)

**Blocked — requires CEO live session:**
Boards require a `gateway_id`. Registering the gateway requires WSS (MC enforces secure
context for browser pairing). The MC containers can reach `http://172.18.0.1:18789` but
not `wss://openclaw-pi.tail2d60.ts.net` — DNS doesn't resolve from inside Docker.

This is expected: the gateway connection is properly a UI task. When CEO opens MC for the
first time, they configure the gateway through the browser (which already has Tailscale HTTPS
context and can reach `wss://openclaw-pi.tail2d60.ts.net` directly).

**CEO live session todo (combine with steps 14+15):**
1. Start both stacks: `cd /home/pi/openclaw && sudo docker compose up -d` and
   `cd /home/pi/openclaw/mission-control && sudo docker compose -f compose.yml --env-file .env up -d`
2. Open `https://openclaw-pi.tail2d60.ts.net:4000` — log in with token from
   `/home/pi/openclaw/secrets/mc_local_auth_token.txt`
3. Settings → Gateways → Add:
   - URL: `wss://openclaw-pi.tail2d60.ts.net`
   - Workspace root: `/home/node/workspace`
   - Token: from `/home/pi/openclaw/secrets/openclaw_gateway_token.txt`
4. Create 5 boards using gateway_id:
   - Engineering: Engine Dev, Console Dev, Site Dev, Quality Manager
   - HQ: Programme Manager
5. Open `https://openclaw-pi.tail2d60.ts.net` → pair browser with each agent tab
6. Run BOOTSTRAP sessions (step 15)

**To start MC:**
```bash
cd /home/pi/openclaw/mission-control
sudo docker compose -f compose.yml --env-file .env up -d
```

**To stop MC:**
```bash
cd /home/pi/openclaw/mission-control
sudo docker compose -f compose.yml --env-file .env down
```

Postgres data persists in the `openclaw-mission-control_postgres_data` Docker volume.

---

### Step 12 — OpenClaw verification ✅
**Date:** 2026-02-27

Brought up briefly (`docker compose up -d openclaw`). Confirmed healthy.
Verified the live config via `docker exec ... cat /root/.openclaw/openclaw.json` — all 6 agents
present with correct ids and workspace paths:

| Agent id | Workspace |
|----------|-----------|
| `engine-dev` | `/home/node/workspace/agents/agent-engine-dev` |
| `console-dev` | `/home/node/workspace/agents/agent-console-dev` |
| `site-dev` | `/home/node/workspace/agents/agent-site-dev` |
| `quality-manager` | `/home/node/workspace/agents/agent-quality-manager` |
| `programme-manager` | `/home/node/workspace/agents/agent-programme-manager` |
| `researcher` | `/home/node/workspace/agents/agent-researcher` |

Agents are loaded lazily — no individual agent entries in filesystem until first session.
No errors in startup logs. Brought back down.

Visual confirmation (all 6 tabs visible in OpenClaw UI) deferred to CEO live session (step 14).

---

### Step 10 — Apply updated `openclaw.json` ✅
**Date:** 2026-02-27

Live config was at `/var/lib/docker/volumes/openclaw_openclaw-data/_data/openclaw.json`.
Old config had two agents with stale ids and paths:
- `engine` → workspace `/home/node/workspace/engine`
- `console-ui` → workspace `/home/node/workspace/console-ui`

Backed up to `openclaw.json.bak`, then wrote the new config with all 6 agents:

| Agent id | Workspace |
|----------|-----------|
| `engine-dev` | `/home/node/workspace/agents/agent-engine-dev` |
| `console-dev` | `/home/node/workspace/agents/agent-console-dev` |
| `site-dev` | `/home/node/workspace/agents/agent-site-dev` |
| `quality-manager` | `/home/node/workspace/agents/agent-quality-manager` |
| `programme-manager` | `/home/node/workspace/agents/agent-programme-manager` |
| `researcher` | `/home/node/workspace/agents/agent-researcher` |

Token carried over from the live config. The staged `openclaw.json` in the researcher
repo keeps its placeholder — the token must not be committed to git.

OpenClaw **not yet restarted** — sandbox files (step 11) must be in place first.

---

### Step 11 — Sandbox files deployed to all agent workspaces ✅
**Date:** 2026-02-27

Sandbox files live in the workspace root — confirmed by inspecting the old `engine` sandbox
(workspace `/home/node/workspace/engine` = `/home/pi/idea/engine/` contained the files).

The existing `agent-engine-dev` files were the generic OpenClaw defaults (came with the repo).
All five workspaces now have IDEA-specific versions:

| Workspace | Action |
|-----------|--------|
| `agent-engine-dev/` | Replaced generic defaults with IDEA versions (needed `sudo` — files were root-owned from Docker) |
| `agent-console-dev/` | Created 6 new files |
| `agent-site-dev/` | Created 6 new files |
| `agent-quality-manager/` | Created 6 new files |
| `agent-programme-manager/` | Created 6 new files |

Files per agent: `SOUL.md`, `IDENTITY.md`, `USER.md`, `TOOLS.md`, `HEARTBEAT.md`, `BOOTSTRAP.md`

---

## What remains (next steps from proposal backlog)

- [ ] Review and approve proposal (ongoing — operating on working approval)
- [ ] Deploy org-root files to `/home/pi/idea/`: `CONTEXT.md`, `ROLES.md`, `PROCESS.md`, `BACKLOG.md`, `standups/`, `discussions/`, `design/`, `proposals/`, `scripts/` (staged in `research/openclaw-initial-config/idea/`)
- [ ] Create `prompting-guide-opus.md` at org root
- [ ] Design standup template and enhance `./standup` script
- [ ] Write `scripts/export-backlog.sh`
- [ ] Create GitHub org (once name decided); transfer repos; create `agent-site-dev`, `agent-quality-manager`, `agent-programme-manager` repos
- [x] **Step 10:** Configure OpenClaw agents in `openclaw.json` — rename existing entries, add new agents, update all workspace paths
- [x] **Step 11:** Copy sandbox files (IDENTITY, SOUL, USER, TOOLS, HEARTBEAT, BOOTSTRAP) to each agent's OpenClaw sandbox
- [x] **Step 12:** Bring OpenClaw up briefly — verify all 6 agents visible — bring back down
- [x] **Step 12a:** Deploy Mission Control — add MC service to `compose.yaml`; configure board hierarchy; bring back down
- [ ] **Step 13:** Set up branch protection on `main` across all repos
- [ ] **Step 14:** Pair browser with each new agent in OpenClaw UI
- [ ] **Step 15:** BOOTSTRAP sessions for all new agents
- [ ] **Step 16:** Create `app-openclaw` repo structure (compose.yaml x-app block, init_data.tar.gz)
- [ ] **Step 17:** Add `idea/openclaw/` config folder and `setup.sh` to `idea` repo
- [ ] Deploy Mission Control; configure board hierarchy
- [ ] Migrate existing backlog items into Mission Control
- [ ] Define cron and heartbeat schedule for all agents
- [ ] Test permanently attached USB SSD as system disk
